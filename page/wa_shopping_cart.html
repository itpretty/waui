<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
    <link rel="stylesheet" href="../lib/weui/css/weui.min.css">
    <link rel="stylesheet" href="../lib/jquery-ui/css/jquery-weui.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/mobile.css"/>
</head>
<body>
<div class="weui_tab" id="shoppingCar">
   <!-- <div class="weui_tab_bd">
        <div class="detai">
            <div class="pic-show">
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide"><img src="../images/img21.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="../images/img21.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="../images/img21.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="../images/img21.jpg" alt=""></div>
                        <div class="swiper-slide"><img src="../images/img21.jpg" alt=""></div>
                    </div>
                    &lt;!&ndash; Add Pagination &ndash;&gt;
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <div class="goods-info whiteBg">
                <h1>FIVERAMS 五花温和雪肌面膜温和雪肌面膜面膜温和雪23m	L/片</h1>
                <div class="price-info">
                    <dl>
                        <dt class="dl-list-1">￥50.00-55.00</dt>
                        <dd class="dl-list-2">剩余<span>15</span>件</dd>
                        <dd class="dl-list-4"><p>厂商建议价：<del>￥60.00</del></p>  <p>每人限购2件</p></dd>
                        <dd class="dl-list-5">已售186件</dd>
                    </dl>
                </div>
            </div>
            <div class="address-info whiteBg">
                <p>
                    <span>收货区域：</span>
                    <span class="address-text">
                        <span class="icon-ico23"></span>河南省新郑市观音寺镇王庄大队小李村
                    </span>
                    <a href="javascript:;" data-target="#half-address" class="open-popup"><span class="icon-ico20 arrow-right"></span></a>
                </p>
            </div>
            <div class="service-info whiteBg">
                <ul class="protxt">
                    <li>运费：手机下单免运费</li><li></li>
                    <li>服务：由大麦场发货并提供服务</li>
                </ul>
                <div class="pageinfoico">
                    <dl>
                      <dt>正</dt>
                      <dd>100%正品保证</dd>
                    </dl>
                    <dl>
                      <dt>实</dt>
                      <dd>实体店体验</dd>
                    </dl>
                    <dl>
                      <dt>惠</dt>
                      <dd>价格实惠</dd>
                    </dl>
                    <dl>
                      <dt>送</dt>
                      <dd>村镇送货上门</dd>
                    </dl>
                    <dl>
                      <dt>金</dt>
                      <dd>金牌客服</dd>
                    </dl>
                    <dl>
                      <dt>售</dt>
                      <dd>售后无忧</dd>
                    </dl>
                </div>
                <span class="icon-ico20 arrow-right"></span>
            </div>
            <div class="whiteBg detail-info ">
                <div class="detail-title">
                    <ul>
                        <li><a href="#">图文详情</a></li>
                        <li class="active"><a href="#">规则参数</a></li>
                    </ul>
                </div>
                <div class="pic-text-info" style="display: none;">
                    <img src="../images/img22.jpg">
                    <br/><br/>
                    <img src="../images/img23.jpg">
                </div>
                <div class="rule-parameters-info">
                    <ul>
                        <li>名称：莲花味精调味料</li>
                        <li>分类：味精/鸡精</li>
                        <li>品牌：莲花</li>
                        <li>计量单位：袋</li>
                        <li>规格：400g</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>-->
    <div class="weui_tabbar detail-footer">
        <ul>
            <li><a href="#"><span class="icon-ico17 icon-star"></span><p>收藏</p></a></li>
            <li><a :href="shoppingCar"><span class="icon-ico11 icon-car"><em v-text="num"></em></span><p>购物车</p></a></li>
            <li><a href="javascript:;" class="btn-add-car btn-default2 open-popup" data-target="#half" @click="getProDetail()">加入购物车</a></li>
            <li><a :href="confirmOrder" class="btn-now-buy btn-default">立即购买</a></li>
            <!--btn-now-buy和btn-add-car是正常状态，btn-disabled是禁用状态-->
        </ul>
    </div>
    <!--加入购物车弹窗--有属性-->
    <div id="half" class="pro-detail-win weui-popup-container popup-bottom">
        <div class="weui-popup-overlay"></div>
        <div class="weui-popup-modal">
            <a href="javascript:;" class="icon-close icon-ico1 close-popup"></a>
            <div class="win-add-car">
                <div class="pro-box">
                    <div class="img_box"><img src="" :src="proImg" alt=""></div>
                    <div class="win-pro-text">
                        <h1 v-text="proIntroduct">FIVERAMS 五花温和雪肌面膜温和雪肌面膜面膜温雪肌面膜面和雪23m	L/片</h1>
                        <p class="win-pro-price" v-text="price">￥50.00-55.00</p>
                    </div>
                </div>
                <div class="pro-attribute">
                    <div class="pro-color pro-block">
                        <h3>颜色</h3>
                        <ul>
                            <li v-for="(el,index) in colors" v-text="el.text" :class="{active: el.item==index}" @click="getActive(index,0)">浅蓝方块碎花</li>
                            <!--<li class="active">浅蓝方块碎花</li>
                            <li>浅蓝方块碎花</li>
                            <li>浅蓝方块碎花</li>-->
                        </ul>
                    </div>
                    <div class="pro-size pro-block">
                        <h3>尺码</h3>
                        <ul>
                            <li v-for="(el,index) in sizes" v-text="el.size" :class="{active: el.item==index}" @click="getActive(index,1)">170/M</li>
                            <!--<li class="active">175/L</li>
                            <li>180/XM</li>
                            <li>185/XXL</li>-->
                        </ul>
                    </div>
                </div>
                <div class="win-total">
                    <div class="win-total-div">
                        <p>合计：￥<span v-text="totalPrice">29.8</span></p>
                        <div class="change_num">
                            <span class="icon-ico16 ico-minus" @click="lessNum()"></span>
                            <input type="tel" v-model="quantity">
                            <span class="icon-ico15 ico-plus" @click="addNum()"></span>
                        </div>
                    </div>
                    <a href="confirm-order.html" class="btn-cinfirm btn-default">确定</a>
                </div>
            </div>
        </div>
    </div>

    <!--加入购物车弹窗--没有属性-->
    <div id="half-attr" class="pro-detail-win weui-popup-container popup-bottom">
        <div class="weui-popup-overlay"></div>
        <div class="weui-popup-modal">
            <a href="javascript:;" class="icon-close icon-ico1 close-popup"></a>
            <div class="win-add-car">
                <div class="pro-box">
                    <div class="img_box"><img src="../images/img19.jpg" alt=""></div>
                    <div class="win-pro-text">
                        <h1>FIVERAMS 五花温和雪肌面膜温和雪肌面膜面膜温雪肌面膜面和雪23mL/片</h1>
                        <p class="win-pro-price">￥50.00-55.00</p>
                    </div>
                </div><div style="clear: both;"></div>
                <div class="win-total">
                    <div class="win-total-div">
                        <p>合计：<span>￥29.8</span></p>
                        <div class="change_num">
                            <span class="icon-ico16 ico-minus"></span>
                            <input type="tel">
                            <span class="icon-ico15 ico-plus"></span>
                        </div>
                    </div>
                    <a :href="confirmOrder" class="btn-cinfirm btn-default">确定</a>
                </div>
            </div>
        </div>
    </div>

    <!--地址选择-->
    <div id="half-address" class="pro-detail-win weui-popup-container popup-bottom">
        <div class="weui-popup-overlay"></div>
        <div class="weui-popup-modal">
            <div class="toolbar">
                <div class="toolbar-inner">
                    <a href="javascript:;" class="picker-button icon-close2 icon-ico18 close-popup"></a>
                    <h1 class="title">配送至</h1>
                </div>
            </div>
            <div class="win-address">
                <!--默认地址选择--start-->
                <!--<div class="select-title">
                    <ul>
                        <li class="active">请选择</li>
                    </ul>
                </div>
                <div class="address-list">
                    <p><span class="icon-ico23"></span>河南省许昌市顺得镇罗东大队河东村</p>
                </div>
                <div class="select-add"><a href="#" class="btn-select btn-default">选择其它地址</a></div>-->
                <!--默认地址选择--end-->
                <!--选择其他地址--start-->
                <div class="select-title">
                    <ul>
                        <li class="active">请选择</li>
                        <!--<li>请选择</li>--此行是在选择了上一级目录之后有的，--->
                    </ul>
                </div>
                <div class="address-list">
                    <ul>
                        <li>河南省</li>
                        <li>河北省</li>
                        <li>河南省</li>
                        <li>河北省</li>
                        <li>河南省</li>
                        <li>河北省</li>
                        <li>河南省</li>
                        <li>河北省</li>
                        <li>河南省</li>
                        <li>河北省111</li>
                    </ul>
                </div>
                <!--选择其他地址--end-->
            </div>
        </div>
    </div>

</div>

<script src="../js/jquery-2.1.4.js"></script>
<script src="../js/fastclick.js"></script>
<script src="../lib/jquery-ui/js/jquery-weui.js"></script>
<script src="../js/swiper.js"></script>
<script src="../js/vue2.0.3.js"></script>
<script src="../js/global.js"></script>
<script src="../js/wa_Component.js"></script>
<script>
    var shoppingCar=new Vue({
        el:"#shoppingCar",
        data:{
            num:12,//购物车商品的总数量
            proImg:'',
            proIntroduct:'',
            price:10.6,
            colors:[],
            sizes:[],
            totalPrice:'',
            quantity:1,
            isActive:false,
            shoppingCar:'shoppingCar.html',//购物车页面
            confirmOrder:'confirm-order.html'//确定购买页面
        },
        computed:{
            totalPrice:function () {
                return (this.quantity * this.price).toFixed(2)
            }
        },
        methods:{
            getProDetail: function () {
                var self = this;
                $.ajax({
                    type: 'GET',
                    url: wa.path.root() + 'data/proDetail.json',
                   // dataType: 'json',
                    success: function (requestdata) {
                        self.proImg = requestdata.imgUrl;
                        self.proIntroduct = requestdata.brief;
                        self.price = requestdata.price;
                        self.colors = requestdata.color;
                        self.sizes = requestdata.size;
                    },
                    error: function (xhr,textStatus, type) {
                        $.alert(this.url + '<br/>' + 'Ajax error!')
                    }
                })
            },
            getActive:function (index,num) {
                if(num==0){
                    for(var i=0,len=shoppingCar.colors.length;i<len;i++){
                        shoppingCar.colors[i].item=-1;
                    }
                    shoppingCar.colors[index].item = index;
                }else if(num==1){
                    for(var i=0,len=shoppingCar.sizes.length;i<len;i++){
                        shoppingCar.sizes[i].item=-1;
                    }
                    shoppingCar.sizes[index].item = index;
                }

            },
            lessNum:function () {
                if(this.quantity>1){
                    return this.quantity--
                }else{
                    return this.quantity = 1
                }

            },
            addNum:function () {
                return this.quantity++
            }
        }

    })


    /*var swiper = new Swiper('.swiper-container', {
        pagination: '.swiper-pagination',
        paginationClickable: true
    });

    var swiperWidth = $(".swiper-slide").width();
    $(".swiper-wrapper").height(swiperWidth);*/

</script>
</body>
</html>